<template>
  <div class="candy">
    <div class="index1" ref="index1">
      <div class="box1 index1_wow rollIn">
        <div class="img-wrap">
          <img src="@/assets/candy/candy1.png" alt="" />
        </div>
        <div class="content">
          <div class="name">山楂条</div>
          <div class="describe">
            山楂条的材料是山楂和白砂糖。
            酸酸甜甜的，山楂外面裹着一层薄薄的糖。有的是很长的一条，
            有的是很短的一条，软软的，甜甜的。听妈妈说吃山楂制品有助消化。
          </div>
        </div>
        <div class="img-wrap1">
          <img src="@/assets/candy/candy2.png" alt="" />
        </div>
        <div class="content1">
          <div class="name">大大卷</div>
          <div class="describe">
            很长很长一条泡泡糖，卷成了一卷，大家想吃多少就扯多少,
            但是很多时候都是一口气吃的差不多了，
            大家都幻想着能吹出超级大的泡泡！
          </div>
        </div>
      </div>
      <div
        class="box2 index1_wow slideInRight"
        data-wow-delay=".1s"
        data-wow-offset="0"
      ></div>
      <div class="box3 index1_wow slideInRight" data-wow-offset="0"></div>
    </div>
    <div class="index2" ref="index2">
      <div class="box1 index2_wow lightSpeedIn">
        <div class="img-wrap">
          <img src="@/assets/candy/candy3.png" alt="" />
        </div>
        <div class="content">
          <div class="name">咪咪虾条</div>
          <div class="describe">
            超级喜欢吃咪咪虾条的，这个真的超好吃，小包装很方便，很香
            很酥很脆。个人认为还是蟹味的好吃，口感很好，非常的脆，也
            没有那种潮的，我喜欢在看剧的时候吃，一小包一小包一下子能
            吃掉很多，感觉每次吃了都会停不下来，现在学校活动都会买它！
          </div>
        </div>
        <div class="img-wrap1">
          <img src="@/assets/candy/candy4.png" alt="" />
        </div>
        <div class="content1">
          <div class="name">麦丽素</div>
          <div class="describe">
            麦丽素是一层巧克力酱裹着酥脆的饼干内里，一口能嚼很多个,
            看电视的时候吃刚刚好！现在市面上的麦丽素千奇百怪，却找不
            到小时候小卖部的味道。
          </div>
        </div>
      </div>
      <div class="box2 index2_wow slideInLeft" data-wow-offset="0"></div>
    </div>
    <div class="index3" ref="index3">
      <div class="box1 index3_wow flipInX">
        <div class="img-wrap">
          <img src="@/assets/candy/candy5.png" alt="" />
        </div>
        <div class="content">
          <div class="name">大白兔奶糖</div>
          <div class="describe">
             大白兔奶糖是位于中国大陆上海冠生园出品的奶类糖果，开始发售以来深受各地人民欢迎。超级可爱。小时候吃的是软软的，现在吃的感觉硬硬的。但是还是很好吃！
          </div>
        </div>
        <div class="img-wrap1">
          <img src="@/assets/candy/candy6.png" alt="" />
        </div>
        <div class="content1">
          <div class="name">喔喔奶糖</div>
          <div class="describe">
            喔喔奶糖的包装五颜六色的，有紫色，蓝色，黄色，绿色，红色,
            但是他们的味道都是一样的，甜甜的奶香味。每年过节回到老
            家我都会吃到爷爷奶奶给我买的喔喔奶糖。每当我吃起他，我就会想起我
            的家乡，我的童年的味道。
          </div>
        </div>
      </div>
      <div class="box2 index3_wow slideInLeft" data-wow-offset="0"></div>
    </div>
    <div class="index4" ref="index4">
      <div class="box1 index4_wow flipInY">
        <div class="img-wrap">
          <img src="@/assets/candy/candy7.png" alt="" />
        </div>
        <div class="content">
          <div class="name">跳跳糖</div>
          <div class="describe">
            有蓝色、黄色、红色、橙色包装，有四种味道，苹果味，甜橙味,
            葡萄味，草莓味。无论是啥味道，一到嘴里，便是酸酸甜甜的
            一粒粒在味蕾炸开，由于它别具一格的特点：在嘴里蹦跳，非常
            受孩子们的喜爱！
          </div>
        </div>
        <div class="img-wrap1">
          <img src="@/assets/candy/candy9.png" alt="" />
        </div>
        <div class="content1">
          <div class="name">真知棒</div>
          <div class="describe">
            真知棒，有很多口味，酸酸甜甜，是小时候经常吃的棒棒糖了。,
            其实对它印象最深的是那个大盒子的盖子有很多个洞，很喜欢拿
            棒棒糖在上面戳戳戳。
          </div>
        </div>
      </div>
      <div class="box2 index4_wow slideInRight" data-wow-offset="0"></div>
    </div>
    <div class="index5" ref="index5">
      <div class="box1 index5_wow wobble">
        <div class="img-wrap">
          <img src="@/assets/candy/candy8.png" alt="" />
        </div>
        <div class="content">
          <div class="name">星球杯</div>
          <div class="describe">
            星球杯，它由黑巧克力酱和白巧克力酱和饼干球组成。就个人来
            说，我喜欢把那些饼干先吃完，然后再吃巧克力酱，但是有的人
            是把巧克力酱和饼干搅和在一起吃。这两种都很有特色，都很好 吃！
          </div>
        </div>
      </div>
    </div>
    <img src="@/assets/img/tom.png" class="tom candy-reveal" alt="" />
  </div>
</template>

<script>
import scrollReveal from "scrollreveal";
import { WOW } from "wowjs";
const INDEX_DEFAULT = {
  index1: {
    boxClass: "index1_wow", // 改boxClas避免和其他组件冲突
    offset: 200,
  },
  index2: {
    boxClass: "index2_wow",
    offset: 200,
  },
  index3: {
    boxClass: "index3_wow",
    offset: 200,
  },
  index4: {
    boxClass: "index4_wow",
    offset: 200,
  },
  index5: {
    boxClass: "index5_wow",
    offset: 200,
  },
};

export default {
  name: "Candy",
  data() {
    return {
      scrollReveal: scrollReveal(),
    };
  },
  mounted() {
    for (const key in INDEX_DEFAULT) {
      if (Object.hasOwnProperty.call(INDEX_DEFAULT, key)) {
        this.wow_init(INDEX_DEFAULT[key]);
      }
    }
    this.reveal_init();
    this.intersectionObserver();
    this.audio = this.$refs.audio;
    // window.scrollReveal = new scrollReveal();
  },
  methods: {
    reveal_init() {
      this.scrollReveal.reveal(".candy-reveal", {
        // 动画的时长
        duration: 1500,
        // 延迟时间
        delay: 0,
        // 动画开始的位置，'bottom', 'left', 'top', 'right'
        origin: "top",
        // 回滚的时候是否再次触发动画
        reset: true,
        // 在移动端是否使用动画
        mobile: false,
        // 滚动的距离，单位可以用%，rem等
        distance: "200px",
        // 其他可用的动画效果
        // opacity: 0.001,
        easing: "linear",
        scale: 0.9,
        viewOffset: {
          //在计算元素可见性时扩展/收缩视口的活动边界。
          top: -300,
          right: 0,
          bottom: 0,
          left: 0,
        },
      });
    },
    wow_init(options) {
      this.$nextTick(() => {
        // console.log("candy wow初始化");
        new WOW(options).init();
      });
    },
    intersectionObserver() {
      const { index1, index2, index3, index4, index5 } = this.$refs;
      // console.log("index1: ", index1);

      let candy_observer = new IntersectionObserver((entries) => {
        // console.log(entries);
        if (!entries[0].isIntersecting) {
          let className = entries[0].target.classList[0];
          this.wow_init(INDEX_DEFAULT[className]);
        }
      });
      candy_observer.observe(index1);
      candy_observer.observe(index2);
      candy_observer.observe(index3);
      candy_observer.observe(index4);
      candy_observer.observe(index5);
    },
  },
};
</script>

<style lang="scss" scoped>
@mixin index {
  width: 100%;
  height: 80vh;
  // box-shadow: 10px 5px 5px red;
  position: relative;
}

@mixin img-style {
  width: 22%;
  img {
    width: 100%;
  }
}
@mixin content {
  width: 300px;
  .name {
    font-size: 50px;
    color: white;
    white-space: nowrap;
    margin-bottom: 20px;
  }
  .describe {
    // font-family: "Franklin Gothic Medium", "Arial Narrow", Arial, sans-serif;
    font-size: 17px;
    font-weight: 600;
    line-height: 25px;
  }
}
.candy {
  width: 85%;
  margin: auto;
  position: relative;
  z-index: $candy-z-index;
  margin-bottom: 20vh;
  .index1 {
    @include index;
    .box1 {
      width: 100%;
      height: 100%;
      background-color: #f38672;
      clip-path: polygon(
        0% 11%,
        30% 11%,
        30% 0%,
        100% 0,
        100% 76%,
        73% 76%,
        73% 88%,
        53% 88%,
        53% 100%,
        30% 100%,
        30% 88%,
        0 88%
      );
      // box-shadow: -10px -5px 5px red;
      position: absolute;

      // &:hover {
      //   transform: translate(-1%, -1%);
      //   width: 101%;
      //   box-shadow: 1px 1px 5px red;
      // }

      .img-wrap {
        // @include img-wrap(200px);
        @include img-style;
        overflow: hidden;
        position: absolute;
        left: 7%;
        bottom: 20%;
      }

      .content {
        position: absolute;
        left: 36%;
        top: 9%;
        width: 200px;
        @include content;
      }
      .img-wrap1 {
        // @include img-wrap(200px);
        @include img-style;
        overflow: hidden;
        position: absolute;
        left: 71%;
        bottom: 53%;
      }

      .content1 {
        position: absolute;
        left: 45%;
        top: 48%;
        width: 200px;
        @include content;
      }
    }
    .box2 {
      width: 20%;
      height: 12%;
      background-color: #f6d854;
      position: absolute;
      left: 53%;
      bottom: 0%;
      // transform: translateY(100%);
    }
    .box3 {
      width: 27%;
      height: 12%;
      background: #9dd3c5;
      position: absolute;
      right: 0;
      bottom: 12%;
      // transform: translateY(100%);
    }
  }

  .index2 {
    @include index;

    .box1 {
      width: 100%;
      height: 100%;
      background-color: #f7cbb0;
      clip-path: polygon(
        0 0,
        73% 0,
        73% 12%,
        100% 12%,
        100% 88%,
        56% 88%,
        56% 100%,
        38% 100%,
        38% 88%,
        0 88%
      );

      .img-wrap {
        // @include img-wrap(200px);
        @include img-style;
        overflow: hidden;
        position: absolute;
        left: 31%;
        top: 8%;
      }

      .content {
        position: absolute;
        left: 7%;
        bottom: 20%;
        width: 200px;
        @include content;
      }
      .img-wrap1 {
        // @include img-wrap(200px);
        @include img-style;
        overflow: hidden;
        position: absolute;
        left: 45%;
        top: 42%;
      }

      .content1 {
        position: absolute;
        left: 71%;
        bottom: 45%;
        width: 200px;
        @include content;
      }
    }

    .box2 {
      position: absolute;
      width: 38%;
      height: 12%;
      background-color: #8864bb;
      bottom: 0%;
      // transform: translateY(100%);
    }
  }

  .index3 {
    @include index;
    .box1 {
      width: 100%;
      height: 100%;
      background-color: #afcfcc;
      clip-path: polygon(0 0, 100% 0, 100% 100%, 70% 100%, 70% 88%, 0 88%);

      .img-wrap {
        // @include img-wrap(200px);
        @include img-style;
        overflow: hidden;
        position: absolute;
        left: 7%;
        bottom: 20%;
      }

      .content {
        position: absolute;
        left: 30%;
        top: 2%;
        width: 200px;
        @include content;
        // color: #fff;

        .name {
          // color: #000;
        }
      }
      .img-wrap1 {
        // @include img-wrap(200px);
        @include img-style;
        overflow: hidden;
        position: absolute;
        left: 71%;
        bottom: 23%;
      }

      .content1 {
        position: absolute;
        left: 45%;
        top: 40%;
        width: 200px;
        @include content;
        // color: #fff;

        .name {
          // color: #000;
        }
      }
    }
    .box2 {
      position: absolute;
      width: 12%;
      height: 12%;
      background-color: #000;
      right: 30%;
      bottom: 0;
      // transform: translateY(100%);
    }
  }

  .index4 {
    @include index;
    height: 93vh;
    .box1 {
      width: 100%;
      height: 100%;
      background-color: #f6d854;
      clip-path: polygon(
        0 0,
        79% 0,
        79% 12%,
        100% 12%,
        100% 76%,
        65% 76%,
        65% 100%,
        45% 100%,
        45% 88%,
        35% 88%,
        35% 85%,
        0 85%
      );

      .img-wrap {
        // @include img-wrap(200px);
        @include img-style;
        overflow: hidden;
        position: absolute;
        left: 7%;
        bottom: 20%;
      }

      .content {
        position: absolute;
        left: 36%;
        top: 9%;
        width: 200px;
        @include content;
      }
      .img-wrap1 {
        // @include img-wrap(200px);
        @include img-style;
        overflow: hidden;
        position: absolute;
        left: 71%;
        bottom: 45%;
      }

      .content1 {
        position: absolute;
        left: 45%;
        top: 45%;
        width: 200px;
        @include content;
      }
    }
    .box2 {
      width: 35%;
      height: 12%;
      position: absolute;
      right: 0;
      bottom: 12%;
      background-color: #5a73e7;
    }
  }

  .index5 {
    @include index;
    // position: absolute;
    transform: translateY(-15%);
    .box1 {
      width: 100%;
      height: 100%;
      background-color: #e2c5b7;
      clip-path: polygon(
        0 10%,
        35% 10%,
        35% 0,
        45% 0,
        45% 15%,
        100% 15%,
        100% 100%,
        0 100%
      );

      .img-wrap {
        // @include img-wrap(200px);
        @include img-style;
        overflow: hidden;
        position: absolute;
        left: 7%;
        top: 20%;
        width: 40%;
      }

      .content {
        position: absolute;
        left: 66%;
        top: 39%;
        width: 200px;
        @include content;
        // color: white;
      }
      // .img-wrap1 {
      //   // @include img-wrap(200px);
      //   @include img-style;
      //   overflow: hidden;
      //   position: absolute;
      //   left: 71%;
      //   bottom: 53%;
      // }

      // .content1 {
      //   position: absolute;
      //   left: 45%;
      //   top: 48%;
      //   width: 200px;
      //   @include content;
      // }
    }
  }

  .tom {
    position: absolute;
    top: -300px;
    left: 0%;
    width: 35%;
    transform: rotateY(180deg);
  }
}
</style>